name: Continuous Integration

on: [push, pull_request]

jobs:
  build_windows:
    runs-on: windows-latest

    steps:
    - uses: actions/checkout@v2
      with:
        lfs: true
        submodules: recursive
    
    - name: Configure
      run: mkdir build && cd build && cmake -DCMAKE_BUILD_TYPE=Release ..
      
    - name: Build
      run: cmake --build build --config Release

    - name: Test
      run: dir /S && build\liblsdj\test\Debug\test.exe
 
#   build_macos:
#     runs-on: macos-latest

#     steps:
#     - uses: actions/checkout@v2
#       with:
#         lfs: true
#         submodules: recursive
    
#     - name: Configure
#       run: mkdir build && cd build && cmake -DCMAKE_BUILD_TYPE=Release ..
      
#     - name: Build
#       run: cmake --build build --config Release

#     - name: Test
#       run: ./build/liblsdj/test/test
 
#   build_ubuntu:
#     runs-on: ubuntu-latest

#     steps:
#     - uses: actions/checkout@v2
#       with:
#         lfs: true
#         submodules: recursive
    
#     - name: Configure
#       run: mkdir build && cd build && cmake -DCMAKE_BUILD_TYPE=Release ..
      
#     - name: Build
#       run: cmake --build build --config Release

#     - name: Test
#       run: ./build/liblsdj/test/test
